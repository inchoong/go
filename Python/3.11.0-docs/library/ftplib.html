
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ftplib --- FTP 协议客户端 &#8212; Python 3.11.0 文档</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?2022.1" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Python 3.11.0 文档 中搜索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="关于这些文档" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="copyright" title="版权所有" href="../copyright.html" />
    <link rel="next" title="poplib --- POP3 协议客户端" href="poplib.html" />
    <link rel="prev" title="http.client --- HTTP 协议客户端" href="http.client.html" />
    <link rel="canonical" href="https://docs.python.org/3/library/ftplib.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="快速搜索"/>
            <input type="submit" value="转向"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <div>
    <h3><a href="../contents.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ftplib</span></code> --- FTP 协议客户端</a><ul>
<li><a class="reference internal" href="#ftp-objects">FTP 对象</a></li>
<li><a class="reference internal" href="#ftp-tls-objects">FTP_TLS 对象</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一个主题</h4>
    <p class="topless"><a href="http.client.html"
                          title="上一章"><code class="xref py py-mod docutils literal notranslate"><span class="pre">http.client</span></code> --- HTTP 协议客户端</a></p>
  </div>
  <div>
    <h4>下一个主题</h4>
    <p class="topless"><a href="poplib.html"
                          title="下一章"><code class="xref py py-mod docutils literal notranslate"><span class="pre">poplib</span></code> --- POP3 协议客户端</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>当前页面</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">提交 Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/library/ftplib.rst"
            rel="nofollow">显示源码
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="poplib.html" title="poplib --- POP3 协议客户端"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="http.client.html" title="http.client --- HTTP 协议客户端"
             accesskey="P">上一页</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 标准库</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="internet.html" accesskey="U">互联网协议和支持</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">ftplib</span></code> --- FTP 协议客户端</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜索" aria-label="快速搜索" type="text" name="q" />
          <input type="submit" value="转向" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-ftplib">
<span id="ftplib-ftp-protocol-client"></span><h1><a class="reference internal" href="#module-ftplib" title="ftplib: FTP protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ftplib</span></code></a> --- FTP 协议客户端<a class="headerlink" href="#module-ftplib" title="永久链接至标题">¶</a></h1>
<p><strong>源代码：</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.11/Lib/ftplib.py">Lib/ftplib.py</a></p>
<hr class="docutils" id="index-0" />
<p>本模块定义了 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 类和一些相关项目。 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 类实现了 FTP 协议的客户端。 你可以用这个类来编写执行各种自动化 FTP 任务的 Python 程序，例如镜像其他 FTP 服务器等。 它还被 <a class="reference internal" href="urllib.request.html#module-urllib.request" title="urllib.request: Extensible library for opening URLs."><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib.request</span></code></a> 模块用来处理使用 FTP 的 URL。 有关 FTP (文件传输协议) 的更多信息，请参阅 <span class="target" id="index-13"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc959.html"><strong>RFC 959</strong></a>。</p>
<p>默认编码为 UTF-8，遵循 <span class="target" id="index-14"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2640.html"><strong>RFC 2640</strong></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">Availability</span></a>: not Emscripten, not WASI.<p>This module does not work or is not available on WebAssembly platforms
<code class="docutils literal notranslate"><span class="pre">wasm32-emscripten</span></code> and <code class="docutils literal notranslate"><span class="pre">wasm32-wasi</span></code>. See
<a class="reference internal" href="intro.html#wasm-availability"><span class="std std-ref">WebAssembly platforms</span></a> for more information.</p>
</p>
<p>以下是使用 <a class="reference internal" href="#module-ftplib" title="ftplib: FTP protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ftplib</span></code></a> 模块的会话示例:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ftplib</span> <span class="kn">import</span> <span class="n">FTP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span> <span class="o">=</span> <span class="n">FTP</span><span class="p">(</span><span class="s1">&#39;ftp.us.debian.org&#39;</span><span class="p">)</span>  <span class="c1"># connect to host, default port</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>                     <span class="c1"># user anonymous, passwd anonymous@</span>
<span class="go">&#39;230 Login successful.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span><span class="o">.</span><span class="n">cwd</span><span class="p">(</span><span class="s1">&#39;debian&#39;</span><span class="p">)</span>               <span class="c1"># change into &quot;debian&quot; directory</span>
<span class="go">&#39;250 Directory successfully changed.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span><span class="o">.</span><span class="n">retrlines</span><span class="p">(</span><span class="s1">&#39;LIST&#39;</span><span class="p">)</span>           <span class="c1"># list directory contents</span>
<span class="go">-rw-rw-r--    1 1176     1176         1063 Jun 15 10:18 README</span>
<span class="gp">...</span>
<span class="go">drwxr-sr-x    5 1176     1176         4096 Dec 19  2000 pool</span>
<span class="go">drwxr-sr-x    4 1176     1176         4096 Nov 17  2008 project</span>
<span class="go">drwxr-xr-x    3 1176     1176         4096 Oct 10  2012 tools</span>
<span class="go">&#39;226 Directory send OK.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;README&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">ftp</span><span class="o">.</span><span class="n">retrbinary</span><span class="p">(</span><span class="s1">&#39;RETR README&#39;</span><span class="p">,</span> <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">)</span>
<span class="go">&#39;226 Transfer complete.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
<span class="go">&#39;221 Goodbye.&#39;</span>
</pre></div>
</div>
<p>这个模块定义了以下内容：</p>
<dl class="py class">
<dt class="sig sig-object py" id="ftplib.FTP">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">FTP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 类的新实例。当传入 <em>host</em> 时，将调用 <code class="docutils literal notranslate"><span class="pre">connect(host)</span></code> 方法。当传入 <em>user</em> 时，将额外调用 <code class="docutils literal notranslate"><span class="pre">login(user,</span> <span class="pre">passwd,</span> <span class="pre">acct)</span></code> 方法（其中 <em>passwd</em> 和 <em>acct</em> 若没有传入则默认为空字符串）。可选参数 <em>timeout</em> 指定阻塞操作（如连接尝试）的超时（以秒为单位，如果未指定超时，将使用全局默认超时设置）。<em>source_address</em> 是一个 2 元组 <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code>，套接字在连接前绑定它，作为其源地址。<em>encoding</em> 参数指定目录和文件名的编码。</p>
<p><a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 类支持 <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> 语句，例如：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ftplib</span> <span class="kn">import</span> <span class="n">FTP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">FTP</span><span class="p">(</span><span class="s2">&quot;ftp1.at.proftpd.org&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ftp</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">ftp</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">ftp</span><span class="o">.</span><span class="n">dir</span><span class="p">()</span>
<span class="gp">... </span>
<span class="go">&#39;230 Anonymous login ok, restrictions apply.&#39;</span>
<span class="go">dr-xr-xr-x   9 ftp      ftp           154 May  6 10:43 .</span>
<span class="go">dr-xr-xr-x   9 ftp      ftp           154 May  6 10:43 ..</span>
<span class="go">dr-xr-xr-x   5 ftp      ftp          4096 May  6 10:43 CentOS</span>
<span class="go">dr-xr-xr-x   3 ftp      ftp            18 Jul 10  2008 Fedora</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版更改: </span>添加了对 <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> 语句的支持。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版更改: </span>添加了 <em>source_address</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.9 版更改: </span>如果 <em>timeout</em> 参数设置为 0，创建非阻塞套接字时，它将引发 <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> 来阻止该操作。添加了 <em>encoding</em> 参数，且为了遵循 <span class="target" id="index-15"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2640.html"><strong>RFC 2640</strong></a>，该参数默认值从 Latin-1 改为了 UTF-8。</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ftplib.FTP_TLS">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">FTP_TLS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">certfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP_TLS" title="永久链接至目标">¶</a></dt>
<dd><p>一个 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 的子类，它为 FTP 添加了 TLS 支持，如 <span class="target" id="index-16"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc4217.html"><strong>RFC 4217</strong></a> 所述。它将像通常一样连接到 21 端口，暗中保护在身份验证前的 FTP 控制连接。而保护数据连接需要用户明确调用 <a class="reference internal" href="#ftplib.FTP_TLS.prot_p" title="ftplib.FTP_TLS.prot_p"><code class="xref py py-meth docutils literal notranslate"><span class="pre">prot_p()</span></code></a> 方法。<em>context</em> 是一个 <a class="reference internal" href="ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code></a> 对象，该对象可以将 SSL 配置选项、证书和私钥打包放入一个单独的（可以长久存在的）结构中。请阅读 <a class="reference internal" href="ssl.html#ssl-security"><span class="std std-ref">安全考量</span></a> 以获取最佳实践。</p>
<p><em>keyfile</em> 和 <em>certfile</em> 是可以代替 <em>context</em> 的传统方案，它们可以分别指向 PEM 格式的私钥和证书链文件，用于进行 SSL 连接。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版更改: </span>添加了 <em>source_address</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版更改: </span>本类现在支持使用 <a class="reference internal" href="ssl.html#ssl.SSLContext.check_hostname" title="ssl.SSLContext.check_hostname"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ssl.SSLContext.check_hostname</span></code></a> 和 <em>服务器名称指示</em> （参阅 <a class="reference internal" href="ssl.html#ssl.HAS_SNI" title="ssl.HAS_SNI"><code class="xref py py-data docutils literal notranslate"><span class="pre">ssl.HAS_SNI</span></code></a>）进行主机名检查。</p>
</div>
<div class="deprecated">
<p><span class="versionmodified deprecated">3.6 版后已移除: </span><em>keyfile</em> 和 <em>certfile</em> 已弃用并转而推荐 <em>context</em>。 请改用 <a class="reference internal" href="ssl.html#ssl.SSLContext.load_cert_chain" title="ssl.SSLContext.load_cert_chain"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ssl.SSLContext.load_cert_chain()</span></code></a> 或让 <a class="reference internal" href="ssl.html#ssl.create_default_context" title="ssl.create_default_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">ssl.create_default_context()</span></code></a> 为你选择系统所信任的 CA 证书。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.9 版更改: </span>如果 <em>timeout</em> 参数设置为 0，创建非阻塞套接字时，它将引发 <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> 来阻止该操作。添加了 <em>encoding</em> 参数，且为了遵循 <span class="target" id="index-17"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2640.html"><strong>RFC 2640</strong></a>，该参数默认值从 Latin-1 改为了 UTF-8。</p>
</div>
<p>以下是使用 <a class="reference internal" href="#ftplib.FTP_TLS" title="ftplib.FTP_TLS"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP_TLS</span></code></a> 类的会话示例:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ftps</span> <span class="o">=</span> <span class="n">FTP_TLS</span><span class="p">(</span><span class="s1">&#39;ftp.pureftpd.org&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftps</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="go">&#39;230 Anonymous user logged in&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftps</span><span class="o">.</span><span class="n">prot_p</span><span class="p">()</span>
<span class="go">&#39;200 Data protection level set to &quot;private&quot;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftps</span><span class="o">.</span><span class="n">nlst</span><span class="p">()</span>
<span class="go">[&#39;6jack&#39;, &#39;OpenBSD&#39;, &#39;antilink&#39;, &#39;blogbench&#39;, &#39;bsdcam&#39;, &#39;clockspeed&#39;, &#39;djbdns-jedi&#39;, &#39;docs&#39;, &#39;eaccelerator-jedi&#39;, &#39;favicon.ico&#39;, &#39;francotone&#39;, &#39;fugu&#39;, &#39;ignore&#39;, &#39;libpuzzle&#39;, &#39;metalog&#39;, &#39;minidentd&#39;, &#39;misc&#39;, &#39;mysql-udf-global-user-variables&#39;, &#39;php-jenkins-hash&#39;, &#39;php-skein-hash&#39;, &#39;php-webdav&#39;, &#39;phpaudit&#39;, &#39;phpbench&#39;, &#39;pincaster&#39;, &#39;ping&#39;, &#39;posto&#39;, &#39;pub&#39;, &#39;public&#39;, &#39;public_keys&#39;, &#39;pure-ftpd&#39;, &#39;qscan&#39;, &#39;qtc&#39;, &#39;sharedance&#39;, &#39;skycache&#39;, &#39;sound&#39;, &#39;tmp&#39;, &#39;ucarp&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ftplib.error_reply">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">error_reply</span></span><a class="headerlink" href="#ftplib.error_reply" title="永久链接至目标">¶</a></dt>
<dd><p>从服务器收到意外答复时，将引发本异常。</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ftplib.error_temp">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">error_temp</span></span><a class="headerlink" href="#ftplib.error_temp" title="永久链接至目标">¶</a></dt>
<dd><p>收到表示临时错误的错误代码（响应代码在 400--499 范围内）时，将引发本异常。</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ftplib.error_perm">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">error_perm</span></span><a class="headerlink" href="#ftplib.error_perm" title="永久链接至目标">¶</a></dt>
<dd><p>收到表示永久性错误的错误代码（响应代码在 500--599 范围内）时，将引发本异常。</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ftplib.error_proto">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">error_proto</span></span><a class="headerlink" href="#ftplib.error_proto" title="永久链接至目标">¶</a></dt>
<dd><p>从服务器收到不符合 FTP 响应规范的答复，比如以数字 1--5 开头时，将引发本异常。</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="ftplib.all_errors">
<span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">all_errors</span></span><a class="headerlink" href="#ftplib.all_errors" title="永久链接至目标">¶</a></dt>
<dd><p>所有异常的集合（一个元组），由于 FTP 连接出现问题（并非调用者的编码错误），<a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 实例的方法可能会引发这些异常。该集合包括上面列出的四个异常以及 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 和 <a class="reference internal" href="exceptions.html#EOFError" title="EOFError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">EOFError</span></code></a>。</p>
</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">参见</p>
<dl class="simple">
<dt><a class="reference internal" href="netrc.html#module-netrc" title="netrc: Loading of .netrc files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">netrc</span></code></a> 模块</dt><dd><p><code class="file docutils literal notranslate"><span class="pre">.netrc</span></code> 文件格式解析器。FTP 客户端在响应用户之前，通常使用 <code class="file docutils literal notranslate"><span class="pre">.netrc</span></code> 文件来加载用户认证信息。</p>
</dd>
</dl>
</div>
<section id="ftp-objects">
<span id="id1"></span><h2>FTP 对象<a class="headerlink" href="#ftp-objects" title="永久链接至标题">¶</a></h2>
<p>一些方法可以按照两种方式来使用：一种处理文本文件，另一种处理二进制文件。方法名称与相应的命令相同，文本版中命令后面跟着 <code class="docutils literal notranslate"><span class="pre">lines</span></code>，二进制版中命令后面跟着 <code class="docutils literal notranslate"><span class="pre">binary</span></code>。</p>
<p><a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 实例具有下列方法:</p>
<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.set_debuglevel">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">set_debuglevel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.set_debuglevel" title="永久链接至目标">¶</a></dt>
<dd><p>设置实例的调试级别，它控制着调试信息的数量。默认值 <code class="docutils literal notranslate"><span class="pre">0</span></code> 不产生调试信息。值 <code class="docutils literal notranslate"><span class="pre">1</span></code> 产生中等数量的调试信息，通常每个请求产生一行。大于或等于 <code class="docutils literal notranslate"><span class="pre">2</span></code> 的值产生的调试信息最多，FTP 控制连接上发送和接收的每一行都将被记录下来。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.connect">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.connect" title="永久链接至目标">¶</a></dt>
<dd><p>连接到给定的主机和端口。默认端口号由 FTP 协议规范规定，为 <code class="docutils literal notranslate"><span class="pre">21</span></code>。偶尔才需要指定其他端口号。每个实例只应调用一次本函数，如果在创建实例时就传入了 host，则根本不应调用它。所有其他方法只能在建立连接后使用。可选参数 <em>timeout</em> 指定连接尝试的超时（以秒为单位）。如果没有传入 <em>timeout</em>，将使用全局默认超时设置。<em>source_address</em> 是一个 2 元组 <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code>，套接字在连接前绑定它，作为其源地址。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">ftplib.connect</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">host</span></code>, <code class="docutils literal notranslate"><span class="pre">port</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版更改: </span>添加了 <em>source_address</em> 参数。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.getwelcome">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">getwelcome</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.getwelcome" title="永久链接至目标">¶</a></dt>
<dd><p>返回服务器发送的欢迎消息，作为连接开始的回复。（该消息有时包含与用户有关的免责声明或帮助信息。）</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.login">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">login</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'anonymous'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.login" title="永久链接至目标">¶</a></dt>
<dd><p>以 <em>user</em> 的身份登录。<em>passwd</em> 和 <em>acct</em> 是可选参数，默认为空字符串。如果没有指定 <em>user</em>，则默认为 <code class="docutils literal notranslate"><span class="pre">'anonymous'</span></code>。如果 <em>user</em> 为 <code class="docutils literal notranslate"><span class="pre">'anonymous'</span></code>，那么默认的 <em>passwd</em> 是 <code class="docutils literal notranslate"><span class="pre">'anonymous&#64;'</span></code>。连接建立后，每个实例只应调用一次本函数；如果在创建实例时传入了 host 和 user，则完全不应该调用本函数。在客户端登录后，才允许执行大多数 FTP 命令。<em>acct</em> 参数提供记账信息 (&quot;accounting information&quot;)；仅少数系统实现了该特性。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.abort">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">abort</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.abort" title="永久链接至目标">¶</a></dt>
<dd><p>中止正在进行的文件传输。本方法并不总是有效，但值得一试。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.sendcmd">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">sendcmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.sendcmd" title="永久链接至目标">¶</a></dt>
<dd><p>将一条简单的命令字符串发送到服务器，返回响应的字符串。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">ftplib.sendcmd</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">cmd</span></code>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.voidcmd">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">voidcmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.voidcmd" title="永久链接至目标">¶</a></dt>
<dd><p>将一条简单的命令字符串发送到服务器，并处理响应内容。如果收到的响应代码表示的是成功（代码范围 200--299），则不返回任何内容。否则将引发 <a class="reference internal" href="#ftplib.error_reply" title="ftplib.error_reply"><code class="xref py py-exc docutils literal notranslate"><span class="pre">error_reply</span></code></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">ftplib.sendcmd</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">cmd</span></code>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.retrbinary">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">retrbinary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8192</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.retrbinary" title="永久链接至目标">¶</a></dt>
<dd><p>以二进制传输模式下载文件。<em>cmd</em> 应为恰当的 <code class="docutils literal notranslate"><span class="pre">RETR</span></code> 命令：<code class="docutils literal notranslate"><span class="pre">'RETR</span> <span class="pre">文件名'</span></code>。<em>callback</em> 函数会在收到每个数据块时调用，传入的参数是表示数据块的一个字节。为执行实际传输，创建了底层套接字对象，可选参数 <em>blocksize</em> 指定了读取该对象时的最大块大小（这也是传入 <em>callback</em> 的数据块的最大大小）。已经选择了合理的默认值。<em>rest</em> 的含义与 <a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a> 方法中的含义相同。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.retrlines">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">retrlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.retrlines" title="永久链接至目标">¶</a></dt>
<dd><p>按照初始化时的 <em>encoding</em> 参数指定的编码，获取文件或目录列表。<em>cmd</em> 应是恰当的 <code class="docutils literal notranslate"><span class="pre">RETR</span></code> 命令（参阅 <a class="reference internal" href="#ftplib.FTP.retrbinary" title="ftplib.FTP.retrbinary"><code class="xref py py-meth docutils literal notranslate"><span class="pre">retrbinary()</span></code></a>），也可以是诸如 <code class="docutils literal notranslate"><span class="pre">LIST</span></code> 或 <code class="docutils literal notranslate"><span class="pre">NLST</span></code> 之类的命令（通常就只是字符串 <code class="docutils literal notranslate"><span class="pre">'LIST'</span></code>）。<code class="docutils literal notranslate"><span class="pre">LIST</span></code> 获取文件列表以及那些文件的信息。<code class="docutils literal notranslate"><span class="pre">NLST</span></code> 获取文件名称列表。<em>callback</em> 函数会在每一行都调用，参数就是包含一行的字符串，删除了尾部的 CRLF。默认的 <em>callback</em> 会把行打印到 <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.set_pasv">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">set_pasv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.set_pasv" title="永久链接至目标">¶</a></dt>
<dd><p>如果 <em>val</em> 为 true，则打开“被动”模式，否则禁用被动模式。默认下被动模式是打开的。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.storbinary">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">storbinary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8192</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.storbinary" title="永久链接至目标">¶</a></dt>
<dd><p>以二进制传输模式存储文件。 <em>cmd</em> 应为恰当的 <code class="docutils literal notranslate"><span class="pre">STOR</span></code> 命令: <code class="docutils literal notranslate"><span class="pre">&quot;STOR</span> <span class="pre">filename&quot;</span></code>。<em>fp</em> 是一个 <a class="reference internal" href="../glossary.html#term-file-object"><span class="xref std std-term">文件对象</span></a> (以二进制模式打开)，将使用它的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code> 方法读取它，用于提供要存储的数据，直到遇到 EOF，读取时的块大小为 <em>blocksize</em>。 参数 <em>blocksize</em> 的默认值为 8192。 可选参数 <em>callback</em> 是单参数函数，在每个数据块发送后都会以该数据块作为参数来调用它。<em>rest</em> 的含义与 <a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a> 方法中的含义相同。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版更改: </span>添加了 <em>rest</em> 参数。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.storlines">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">storlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.storlines" title="永久链接至目标">¶</a></dt>
<dd><p>以文本行模式存储文件。<em>cmd</em> 应为恰当的 <code class="docutils literal notranslate"><span class="pre">STOR</span></code> 命令 (请参阅 <a class="reference internal" href="#ftplib.FTP.storbinary" title="ftplib.FTP.storbinary"><code class="xref py py-meth docutils literal notranslate"><span class="pre">storbinary()</span></code></a>)。 <em>fp</em> 是一个 <a class="reference internal" href="../glossary.html#term-file-object"><span class="xref std std-term">文件对象</span></a> (以二进制模式打开)，将使用它的 <a class="reference internal" href="io.html#io.IOBase.readline" title="io.IOBase.readline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">readline()</span></code></a> 方法读取它的每一行，用于提供要存储的数据，直到遇到 EOF。 可选参数 <em>callback</em> 是单参数函数，在每行发送后都会以该行作为参数来调用它。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.transfercmd">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">transfercmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.transfercmd" title="永久链接至目标">¶</a></dt>
<dd><p>在 FTP 数据连接上开始传输数据。如果传输处于活动状态，传输命令由 <em>cmd</em> 指定，需发送 <code class="docutils literal notranslate"><span class="pre">EPRT</span></code> 或 <code class="docutils literal notranslate"><span class="pre">PORT</span></code> 命令，然后接受连接 (accept)。如果服务器是被动服务器，需发送 <code class="docutils literal notranslate"><span class="pre">EPSV</span></code> 或 <code class="docutils literal notranslate"><span class="pre">PASV</span></code> 命令，连接到服务器 (connect)，然后启动传输命令。两种方式都将返回用于连接的套接字。</p>
<p>如果传入了可选参数 <em>rest</em>，则一条 <code class="docutils literal notranslate"><span class="pre">REST</span></code> 命令会被发送到服务器，并以 <em>rest</em> 作为参数。<em>rest</em> 通常表示请求文件中的字节偏移量，它告诉服务器重新开始发送文件的字节，从请求的偏移量处开始，跳过起始字节。但是请注意，<a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a> 方法会将 <em>rest</em> 转换为字符串，但是不检查字符串的内容，转换用的编码是在初始化时指定的 <em>encoding</em> 参数。如果服务器无法识别 <code class="docutils literal notranslate"><span class="pre">REST</span></code> 命令，将引发 <a class="reference internal" href="#ftplib.error_reply" title="ftplib.error_reply"><code class="xref py py-exc docutils literal notranslate"><span class="pre">error_reply</span></code></a> 异常。如果发生这种情况，只需不带 <em>rest</em> 参数调用 <a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.ntransfercmd">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">ntransfercmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.ntransfercmd" title="永久链接至目标">¶</a></dt>
<dd><p>类似于 <a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a>，但返回一个元组，包括数据连接和数据的预计大小。如果预计大小无法计算，则返回的预计大小为 <code class="docutils literal notranslate"><span class="pre">None</span></code>。<em>cmd</em> 和 <em>rest</em> 的含义与 <a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a> 中的相同。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.mlsd">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">mlsd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.mlsd" title="永久链接至目标">¶</a></dt>
<dd><p>使用 <code class="docutils literal notranslate"><span class="pre">MLSD</span></code> 命令以标准格式列出目录内容 (<span class="target" id="index-18"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3659.html"><strong>RFC 3659</strong></a>)。如果省略 <em>path</em> 则使用当前目录。<em>facts</em> 是字符串列表，表示所需的信息类型（如 <code class="docutils literal notranslate"><span class="pre">[&quot;type&quot;,</span> <span class="pre">&quot;size&quot;,</span> <span class="pre">&quot;perm&quot;]</span></code>）。返回一个生成器对象，每个在 path 中找到的文件都将在该对象中生成两个元素的元组。第一个元素是文件名，第二个元素是该文件的 facts 的字典。该字典的内容受 <em>facts</em> 参数限制，但不能保证服务器会返回所有请求的 facts。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.nlst">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">nlst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argument</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">...</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.nlst" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个文件名列表，文件名由 <code class="docutils literal notranslate"><span class="pre">NLST</span></code> 命令返回。可选参数 <em>argument</em> 是待列出的目录（默认为当前服务器目录）。可以使用多个参数，将非标准选项传递给 <code class="docutils literal notranslate"><span class="pre">NLST</span></code> 命令。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>如果目标服务器支持相关命令，那么 <a class="reference internal" href="#ftplib.FTP.mlsd" title="ftplib.FTP.mlsd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mlsd()</span></code></a> 提供的 API 更好。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.dir">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argument</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">...</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.dir" title="永久链接至目标">¶</a></dt>
<dd><p>生成目录列表，即 <code class="docutils literal notranslate"><span class="pre">LIST</span></code> 命令所返回的结果，并将其打印到标准输出。可选参数 <em>argument</em> 是待列出的目录（默认为当前服务器目录）。可以使用多个参数，将非标准选项传递给 <code class="docutils literal notranslate"><span class="pre">LIST</span></code> 命令。如果最后一个参数是一个函数，它将被用作 <em>callback</em> 函数，与 <a class="reference internal" href="#ftplib.FTP.retrlines" title="ftplib.FTP.retrlines"><code class="xref py py-meth docutils literal notranslate"><span class="pre">retrlines()</span></code></a> 中的相同，默认将打印到 <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>。本方法返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>如果目标服务器支持相关命令，那么 <a class="reference internal" href="#ftplib.FTP.mlsd" title="ftplib.FTP.mlsd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mlsd()</span></code></a> 提供的 API 更好。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.rename">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fromname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">toname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.rename" title="永久链接至目标">¶</a></dt>
<dd><p>将服务器上的文件 <em>fromname</em> 重命名为 <em>toname</em>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.delete">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.delete" title="永久链接至目标">¶</a></dt>
<dd><p>将服务器上名为 <em>filename</em> 的文件删除。如果删除成功，返回响应文本，如果删除失败，在权限错误时引发 <a class="reference internal" href="#ftplib.error_perm" title="ftplib.error_perm"><code class="xref py py-exc docutils literal notranslate"><span class="pre">error_perm</span></code></a>，在其他错误时引发 <a class="reference internal" href="#ftplib.error_reply" title="ftplib.error_reply"><code class="xref py py-exc docutils literal notranslate"><span class="pre">error_reply</span></code></a>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.cwd">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">cwd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.cwd" title="永久链接至目标">¶</a></dt>
<dd><p>设置服务器端的当前目录。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.mkd">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">mkd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.mkd" title="永久链接至目标">¶</a></dt>
<dd><p>在服务器上创建一个新目录。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.pwd">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">pwd</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.pwd" title="永久链接至目标">¶</a></dt>
<dd><p>返回服务器上当前目录的路径。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.rmd">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">rmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.rmd" title="永久链接至目标">¶</a></dt>
<dd><p>将服务器上名为 <em>dirname</em> 的目录删除。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.size">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.size" title="永久链接至目标">¶</a></dt>
<dd><p>请求服务器上名为 <em>filename</em> 的文件大小。成功后以整数返回文件大小，未成功则返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。注意，<code class="docutils literal notranslate"><span class="pre">SIZE</span></code> 不是标准命令，但通常许多服务器的实现都支持该命令。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.quit">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">quit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.quit" title="永久链接至目标">¶</a></dt>
<dd><p>向服务器发送 <code class="docutils literal notranslate"><span class="pre">QUIT</span></code> 命令并关闭连接。 这是关闭一个连接的“礼貌”方式，但是如果服务器对 <code class="docutils literal notranslate"><span class="pre">QUIT</span></code> 命令的响应带有错误消息则这会引发一个异常。 这意味着对 <a class="reference internal" href="#ftplib.FTP.close" title="ftplib.FTP.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> 方法的调用，它将使得 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 实例对后继调用无效（见下文）。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.close">
<span class="sig-prename descclassname"><span class="pre">FTP.</span></span><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP.close" title="永久链接至目标">¶</a></dt>
<dd><p>单方面关闭连接。 这不该被应用于已经关闭的连接，例如成功调用 <a class="reference internal" href="#ftplib.FTP.quit" title="ftplib.FTP.quit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">quit()</span></code></a> 之后的连接。 在此调用之后 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 实例不应被继续使用（在调用 <a class="reference internal" href="#ftplib.FTP.close" title="ftplib.FTP.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> 或 <a class="reference internal" href="#ftplib.FTP.quit" title="ftplib.FTP.quit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">quit()</span></code></a> 之后你不能通过再次发起调用 <a class="reference internal" href="#ftplib.FTP.login" title="ftplib.FTP.login"><code class="xref py py-meth docutils literal notranslate"><span class="pre">login()</span></code></a> 方法重新打开连接）。</p>
</dd></dl>

</section>
<section id="ftp-tls-objects">
<h2>FTP_TLS 对象<a class="headerlink" href="#ftp-tls-objects" title="永久链接至标题">¶</a></h2>
<p><a class="reference internal" href="#ftplib.FTP_TLS" title="ftplib.FTP_TLS"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP_TLS</span></code></a> 类继承自 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a>，它定义了下述其他对象：</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ftplib.FTP_TLS.ssl_version">
<span class="sig-prename descclassname"><span class="pre">FTP_TLS.</span></span><span class="sig-name descname"><span class="pre">ssl_version</span></span><a class="headerlink" href="#ftplib.FTP_TLS.ssl_version" title="永久链接至目标">¶</a></dt>
<dd><p>欲采用的 SSL 版本（默认为 <a class="reference internal" href="ssl.html#ssl.PROTOCOL_SSLv23" title="ssl.PROTOCOL_SSLv23"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ssl.PROTOCOL_SSLv23</span></code></a>）。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP_TLS.auth">
<span class="sig-prename descclassname"><span class="pre">FTP_TLS.</span></span><span class="sig-name descname"><span class="pre">auth</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP_TLS.auth" title="永久链接至目标">¶</a></dt>
<dd><p>通过使用 TLS 或 SSL 来设置一个安全控制连接，具体取决于 <a class="reference internal" href="#ftplib.FTP_TLS.ssl_version" title="ftplib.FTP_TLS.ssl_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ssl_version</span></code></a> 属性是如何设置的。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版更改: </span>此方法现在支持使用 <a class="reference internal" href="ssl.html#ssl.SSLContext.check_hostname" title="ssl.SSLContext.check_hostname"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ssl.SSLContext.check_hostname</span></code></a> 和 <em>服务器名称指示</em> (参见 <a class="reference internal" href="ssl.html#ssl.HAS_SNI" title="ssl.HAS_SNI"><code class="xref py py-data docutils literal notranslate"><span class="pre">ssl.HAS_SNI</span></code></a>) 进行主机名检查。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP_TLS.ccc">
<span class="sig-prename descclassname"><span class="pre">FTP_TLS.</span></span><span class="sig-name descname"><span class="pre">ccc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP_TLS.ccc" title="永久链接至目标">¶</a></dt>
<dd><p>将控制通道回复为纯文本。 这适用于发挥知道如何使用非安全 FTP 处理 NAT 而无需打开固定端口的防火墙的优势。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP_TLS.prot_p">
<span class="sig-prename descclassname"><span class="pre">FTP_TLS.</span></span><span class="sig-name descname"><span class="pre">prot_p</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP_TLS.prot_p" title="永久链接至目标">¶</a></dt>
<dd><p>设置加密数据连接。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP_TLS.prot_c">
<span class="sig-prename descclassname"><span class="pre">FTP_TLS.</span></span><span class="sig-name descname"><span class="pre">prot_c</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftplib.FTP_TLS.prot_c" title="永久链接至目标">¶</a></dt>
<dd><p>设置明文数据连接。</p>
</dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ftplib</span></code> --- FTP 协议客户端</a><ul>
<li><a class="reference internal" href="#ftp-objects">FTP 对象</a></li>
<li><a class="reference internal" href="#ftp-tls-objects">FTP_TLS 对象</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一个主题</h4>
    <p class="topless"><a href="http.client.html"
                          title="上一章"><code class="xref py py-mod docutils literal notranslate"><span class="pre">http.client</span></code> --- HTTP 协议客户端</a></p>
  </div>
  <div>
    <h4>下一个主题</h4>
    <p class="topless"><a href="poplib.html"
                          title="下一章"><code class="xref py py-mod docutils literal notranslate"><span class="pre">poplib</span></code> --- POP3 协议客户端</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>当前页面</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">提交 Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/library/ftplib.rst"
            rel="nofollow">显示源码
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="poplib.html" title="poplib --- POP3 协议客户端"
             >下一页</a> |</li>
        <li class="right" >
          <a href="http.client.html" title="http.client --- HTTP 协议客户端"
             >上一页</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 标准库</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="internet.html" >互联网协议和支持</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">ftplib</span></code> --- FTP 协议客户端</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜索" aria-label="快速搜索" type="text" name="q" />
          <input type="submit" value="转向" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">版权所有</a> 2001-2022, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    最后更新于 11月 24, 2022.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    由 <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0创建。
    </div>

  </body>
</html>