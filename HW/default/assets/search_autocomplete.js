var gSelectedIndex=-1;var gSelectedID=-1;var gMatches=new Array();var gLastText="";var ROW_COUNT=12;var gInitialized=false;var DEFAULT_TEXT="";function set_row_selected(c,b){var a=c.cells[0];if(b){a.className="jd-autocomplete jd-selected"}else{a.className="jd-autocomplete"}}function set_row_values(a,d,b){var c=d.cells[0].childNodes[0];c.innerHTML=b.__hilabel||b.label;c.href=a+b.link}function sync_selection_table(a){var b=document.getElementById("search_filtered");var f;var c;gSelectedID=-1;b.onmouseover=function(){if(gSelectedIndex>=0){set_row_selected(this.rows[gSelectedIndex],false);gSelectedIndex=-1}};if(!gInitialized){for(c=0;c<ROW_COUNT;c++){var f=b.insertRow(-1);var d=f.insertCell(-1);d.className="jd-autocomplete";var e=document.createElement("a");d.onmousedown=function(){window.location=this.firstChild.getAttribute("href")};d.onmouseover=function(){this.className=this.className+" jd-selected"};d.onmouseout=function(){this.className="jd-autocomplete"};d.appendChild(e)}gInitialized=true}if(gMatches.length>0){document.getElementById("search_filtered_div").className="showing";var g=gMatches.length<ROW_COUNT?gMatches.length:ROW_COUNT;for(c=0;c<g;c++){f=b.rows[c];f.className="show-row";set_row_values(a,f,gMatches[c]);set_row_selected(f,c==gSelectedIndex);if(c==gSelectedIndex){gSelectedID=gMatches[c].id}}for(;c<ROW_COUNT;c++){f=b.rows[c];f.className="no-display"}}else{document.getElementById("search_filtered_div").className="no-display"}}function search_changed(g,f){var l=document.getElementById("search_autocomplete");var j=l.value.replace(/(^ +)|( +$)/g,"");if(g.keyCode==13){document.getElementById("search_filtered_div").className="no-display";if(f&&gSelectedIndex>=0){window.location=toRoot+gMatches[gSelectedIndex].link;return false}else{if(gSelectedIndex<0){return true}}}else{if(f&&(g.keyCode==38)){if(gSelectedIndex>=0){gSelectedIndex--}sync_selection_table(toRoot);return false}else{if(f&&(g.keyCode==40)){if(gSelectedIndex<gMatches.length-1&&gSelectedIndex<ROW_COUNT-1){gSelectedIndex++}sync_selection_table(toRoot);return false}else{if(!f){gMatches=new Array();matchedCount=0;gSelectedIndex=-1;for(var d=0;d<DATA.length;d++){var k=DATA[d];if(j.length!=0&&(k.label.toLowerCase().indexOf(j.toLowerCase())!=-1||k.content.toLowerCase().indexOf(j.toLowerCase())!=-1)){if(k.label.toLowerCase().indexOf(j.toLowerCase())==-1){var h=k.content.toLowerCase().indexOf(j.toLowerCase());var b=k.content.toLowerCase().length;var a=5;var c=5;a=h>=a?(h-a):0;c=(h+c)<=b?(h+c):b;k.label="["+k.content.substring(a,c)+"]"}gMatches[matchedCount]=k;matchedCount++}}rank_autocomplete_results(j);for(var d=0;d<gMatches.length;d++){var k=gMatches[d];if(gSelectedID==k.id){gSelectedIndex=d}}highlight_autocomplete_result_labels(j);sync_selection_table(toRoot);return true}}}}}function rank_autocomplete_results(f){f=f||"";if(!gMatches||!gMatches.length){return}var h=function(n,m){if(n==""){return -1}var i=-1;var k;while((k=n.search(m))>=0){if(i<0){i=0}i+=k;n=n.substr(k+1)}return i};var b=function(l,o){var m=0;for(var k=0;k<l.length;k++){if(l.charAt(k)==o){++m}}return m};var j=f.toLowerCase();var d=(j.match(/\w+/)||[""])[0];var e=new RegExp("\\b"+d);var g=new RegExp("\\b"+d+"\\b");var a=function(i){var n=1;var m=i.label.toLowerCase();var l;l=h(m,g);if(l>=0){var k=b(m.substr(l+1),".");n*=200/(k+1)}else{l=h(m,e);if(l>=0){var k=b(m.substr(l+1),".");n*=20/(k+1)}}return n};for(var c=0;c<gMatches.length;c++){gMatches[c].__resultScore=a(gMatches[c])}gMatches.sort(function(k,i){var l=i.__resultScore-k.__resultScore;if(l==0){l=(k.label<i.label)?-1:1}return l})}function highlight_autocomplete_result_labels(d){d=d||"";if(!gMatches||!gMatches.length){return}var e=d.toLowerCase();var a=(e.match(/[^\s\.]+/)||[""])[0];var b=new RegExp("("+a.replace(/\./g,"\\.")+")","ig");for(var c=0;c<gMatches.length;c++){gMatches[c].__hilabel=gMatches[c].label.replace(b,"<b><font color=red>$1</font></b>")}}function search_focus_changed(b,a){if(a){if(b.value==DEFAULT_TEXT){b.value="";b.style.color="#000000"}}else{if(b.value==""){b.value=DEFAULT_TEXT;b.style.color="#aaaaaa"}document.getElementById("search_filtered_div").className="no-display"}}function submit_search(){search_onsubmit();return false}function search_onsubmit(){var a=0;var c=document.getElementById("search_autocomplete");var e=c.value.replace(/(^ +)|( +$)/g,"");for(var b=0;b<DATA1.length;b++){var d=DATA1[b];if(e.length!=0&&(d.label.toLowerCase().indexOf(e.toLowerCase())!=-1||d.content.toLowerCase().indexOf(e.toLowerCase())!=-1)){gMatches[a]=d;a++}}showResult(gMatches,e)}function showResult(j,q){var n="搜索结果：";var d="条";if(docLangage!="zh-cn"){n="resluts : ";d=" records"}document.getElementById("jd-header").innerHTML=n+"0"+d;var k=document.getElementById("showTable");for(var f=k.rows.length-1;f>=0;f--){k.deleteRow(f)}q=q||"";if(!j||!j.length){return}var r=q.toLowerCase();var g=(r.match(/[^\s\.]+/)||[""])[0];var h=new RegExp("("+g.replace(/\./g,"\\.")+")","ig");for(var f=0;f<j.length;f++){var l=k.rows.length-1;var p=k.insertRow(l);var b=p.insertCell(-1);var o="name";var m=j[f].content.toLowerCase().indexOf(q.toLowerCase());var c=j[f].content.toLowerCase().length;var a=30;var e=40;a=m>=a?(m-a):0;e=(m+e)<=c?(m+e):c;j[f].content=j[f].content.substring(a,e);j[f]._label=j[f].label.replace(h,"<b><font color=red>$1</font></b>");j[f]._content=j[f].content.replace(h,"<b><font color=red>$1</font></b>");b.innerHTML="<a href="+toRoot+j[f].link+">"+j[f]._label+"</a><br/><br/>"+j[f]._content+"<br/><br/>";b.setAttribute("className","tablerclass")}document.getElementById("jd-header").innerHTML=n+j.length+d;document.getElementById("jd-content").innerHTML=""};